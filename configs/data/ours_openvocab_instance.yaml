defaults:
  - ours_openvocab

train_dataset:
  mask_dir: /datasets/scannet_masks/oracle
  ignore_class_idx: [0, 1, 19]
  transforms:
    - type: Copy
      keys_dict:
        coord: origin_coord
    - type: MeanShift
    - type: RandomFlip
      p: 0.5
    - type: RandomRotate
      p: 1.0
      angle: [-1, 1]
      center: [0, 0, 0]
      axis: z
    - type: ChromaticJitter
      p: 1.0
      std: 0.007
    - type: ElasticDistortion
    - type: SphereCrop
      point_max: 250000
      mode: random
    - type: NormalizeColor
    - type: ToTensor
    - type: Collect
      keys:
        [
          "origin_coord",
          "coord",
          "color",
          "segment",
          "instance",
          "binary",
          "caption_data",
          "origin_idx",
          "masks_binary",
        ]
      offset_keys_dict:
        offset: coord
        pc_count: origin_coord
      feat_keys: ["color", "coord"]

val_dataset:
  mask_dir: ${data.train_dataset.mask_dir}
  transforms:
    - type: Copy
      keys_dict:
        coord: origin_coord
    - type: MeanShift
    - type: NormalizeColor
    - type: ToTensor
    - type: Collect
      keys:
        [
          "origin_coord",
          "coord",
          "color",
          "segment",
          "instance",
          "binary",
          "caption_data",
          "origin_idx",
          "masks_binary",
        ]
      offset_keys_dict:
        offset: coord
        pc_count: origin_coord
      feat_keys: ["color", "coord"]

collate_fn:
  _target_: src.data.collate.point_collate_fn_with_masks
