_target_: src.data.datamodule.DataModule

train_dataset:
  _target_: src.data.dataset.AnnotatedDataset
  _partial_: true
  dataset_name: scannetv2
  data_dir: /datasets/mosaic3d/data/scannet
  split: train
  max_num_masks: 300
  ignore_label: -100
  repeat: 4
  transforms: ${data.train_transforms}

val_datasets:
  - _target_: src.data.scannet.dataset.ScanNetDataset
    _partial_: true
    data_dir: /datasets/scannet_hf
    split: val
    log_postfix: scannet20
    ignore_class_idx: [19] # otherfurniture
    ignore_label: ${data.train_dataset.ignore_label}
    transforms: ${data.val_transforms}

  - _target_: src.data.scannet.dataset.ScanNet200Dataset
    _partial_: true
    data_dir: /datasets/scannet_hf
    split: val
    log_postfix: scannet200
    mask_dir: /datasets/scannet_masks/mask3d_scannet200_openins3d
    ignore_label: ${data.train_dataset.ignore_label}
    transforms: ${data.val_transforms}

collate_fn:
  _target_: src.data.collate.point_collate_fn_with_masks
  _partial_: true
  grid_size: 0.02

batch_size: 4
num_workers: 2

checkpoint_monitor: "val_scannet200/miou"
