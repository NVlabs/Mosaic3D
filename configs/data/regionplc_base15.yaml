_target_: src.data.datamodule.DataModule

train_dataset:
  _target_: src.data.scannet.dataset.ScanNetDataset
  _partial_: true
  data_dir: /datasets/scannet_hf
  image_root_path: /datasets/scannet_frames/tasks/scannet_frames_25k
  caption_dir: /datasets/regionplc_converted/
  caption_subset: detic-template_and_kosmos_125k_iou0.2
  object_num_max: 300
  split: train
  repeat: 4
  transforms: ${data.train_transforms}
  base_class_idx: [0, 1, 2, 3, 4, 6, 7, 8, 10, 11, 13, 14, 15, 17, 18]
  ignore_class_idx: [19]
  novel_class_idx: [5, 9, 12, 16]
  ignore_label: -100
  clip_text_alignment: ${oc.select:model.loss_cfg.train_clip_text_alignment,false}
  clip_image_alignment: ${oc.select:model.loss_cfg.train_clip_image_alignment,false}
  clip_input_resolution: 224

val_datasets:
  - _target_: src.data.scannet.dataset.ScanNetDataset
    _partial_: true
    data_dir: ${data.train_dataset.data_dir}
    image_root_path: ${data.train_dataset.image_root_path}
    caption_dir: ${data.train_dataset.caption_dir}
    caption_subset: ${data.train_dataset.caption_subset}
    object_num_max: ${data.train_dataset.object_num_max}
    base_class_idx: ${data.train_dataset.base_class_idx}
    ignore_class_idx: ${data.train_dataset.ignore_class_idx}
    novel_class_idx: ${data.train_dataset.novel_class_idx}
    ignore_label: ${data.train_dataset.ignore_label}
    split: val
    log_postfix: scannet20
    transforms: ${data.val_transforms}
    clip_text_alignment: ${oc.select:model.eval_cfg.eval_clip_text_alignment,false}
    clip_image_alignment: ${oc.select:model.eval_cfg.eval_clip_image_alignment,false}
    clip_input_resolution: ${data.train_dataset.clip_input_resolution}

collate_fn:
  _target_: src.data.collate.point_collate_fn_with_masks
  _partial_: true
  grid_size: 0.02

batch_size: 4
num_workers: 2

checkpoint_monitor: "val_scannet20/hiou"
