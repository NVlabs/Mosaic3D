_target_: src.data.datamodule.DataModule

train_dataset:
  _target_: src.data.concat_dataset.ConcatDataset
  _partial_: true
  ignore_label: -100
  conditions: ["ScanNet", "ScanNet", "ScanNet", "ScanNet", "ScanNet"]
  repeat: 1
  datasets:
    - _target_: src.data.eth3d.dataset.ETH3DDataset
      _partial_: true
      data_dir: /datasets/eth3d
      transforms:
        - type: Copy
          keys_dict:
            coord: origin_coord
        - type: CenterShift
          apply_z: true
        - type: NormalizeColor
        - type: Add
          keys_dict:
            condition: ScanNet
        - type: ToTensor
        - type: Collect

val_datasets:
  - _target_: src.data.eth3d.dataset.ETH3DDataset
    _partial_: true
    data_dir: /datasets/eth3d
    transforms:
      - type: Copy
        keys_dict:
          coord: origin_coord
      - type: CenterShift
        apply_z: true
      - type: NormalizeColor
      - type: Add
        keys_dict:
          condition: ScanNet
      - type: ToTensor
      - type: Collect
        keys:
          [
            "origin_coord",
            "coord",
            "color",
            "segment",
            "instance",
            "binary",
            "caption_data",
            "origin_idx",
            "condition",
          ]
        offset_keys_dict:
          offset: coord
          pc_count: origin_coord
        feat_keys: ["color"]

collate_fn:
  _target_: src.data.collate.point_collate_fn_with_masks
  _partial_: true
  grid_size: 0.05

batch_size: 1
num_workers: 8
in_channel: 3

checkpoint_monitor: "val_scannet200/miou"
